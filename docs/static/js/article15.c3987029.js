(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["article15"],{"441e":function(s,a,r){"use strict";r.r(a);var t=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},e=[function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("section",[r("p",[s._v("上一篇文章我们简单的介绍了五子棋以及AI相关的基本概念，相信大家也对五子棋的历史以及现状有了一个大概的印象，那么从这篇文章起，就正式开始这个五子棋的制作。"),r("br"),s._v(" 本篇文章我们将完成游戏界面的绘制（包括棋盘，棋子）、棋盘的点击事件以及基本的游戏逻辑。")]),r("blockquote",[r("p",[s._v("Tips：本文以及之后的文章均只贴出关键部分实现的代码，想查看完整的源码及效果可以访问该项目的Github地址以及在线演示页面。（地址将在文末贴出）")])]),r("h2",[s._v("绘制棋盘与棋子")]),r("p",[s._v("因为我们的主要目的是AI的设计，所以这个游戏界面设计得比较简单，同时也方便我们的编码实现。")]),r("p",[s._v("首先大概介绍下这个项目所用到的技术：")]),r("ul",[r("li",[s._v("界面：考虑到游戏的执行效率和优化问题，这里我们采用HTML5的"),r("code",{pre:!0},[s._v("canvas")]),s._v("来绘制游戏界面。")]),r("li",[s._v("逻辑：不采用复杂的框架或引擎技术，尽量使用简单的"),r("code",{pre:!0},[s._v("JavaScript")]),s._v("脚本（少量"),r("code",{pre:!0},[s._v("jQuery")]),s._v("语句）来完成基本的逻辑操作以及AI的实现。")])]),r("p",[s._v("本游戏采用类似井字棋的下法规则，棋子落在格子内而不是交叉点。棋子则采用X和O来代替黑棋和白棋（其实是个人不喜欢传统的黄色棋盘和黑白棋子。。审美疲劳），默认情况下X为传统规则下的黑棋，也就是先手。")]),r("p",[s._v("五子棋棋盘由横纵各15条等距离，垂直交叉的平行线构成。我们首先要做的就是利用canvas的画线函数"),r("code",{pre:!0},[s._v("lineTo")]),s._v("来绘制这个棋盘。")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//绘制棋盘")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("drawChessBoard")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n    canvas = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".getElementById("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"canvas"')]),s._v(");\n    context = canvas.getContext("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"2d"')]),s._v(");\n    context.lineWidth = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(";\n    context.strokeStyle = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"#577A9E"')]),s._v(";"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//线条颜色")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" lineOffset = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//线条偏移量")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i <= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("420")]),s._v("; i += "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(") {"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//绘制棋盘的线")]),s._v("\n        context.beginPath();\n        context.moveTo("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", i + lineOffset);\n        context.lineTo("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("421")]),s._v(", i + lineOffset);\n        context.closePath();\n        context.stroke();\n\n        context.beginPath();\n        context.moveTo(i + lineOffset, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(");\n        context.lineTo(i + lineOffset, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("421")]),s._v(");\n        context.closePath();\n        context.stroke();\n    }\n}\n")])]),r("p",[s._v("这里遇到了一个不是bug的bug，用"),r("code",{pre:!0},[s._v("lineTo")]),s._v("画一条线的时候看不出来，但是循环画出棋盘后，就发现线条粗细不一样。在网上查阅了相关资料，才知道是因为"),r("code",{pre:!0},[s._v("canvas")]),s._v("绘制线条的方式会使线条变模糊，所以这里必须把原坐标加上一个偏移量才能使绘图恢复正常。(绘制棋子时也会加上这个偏移量)")]),r("p",[s._v("绘制线条的原理可以参考下面这几篇文章："),r("br"),r("em",[r("a",{attrs:{href:"http://blog.csdn.net/jia20003/article/details/9474939"}},[s._v("HTML5 Canvas中实现绘制一个像素宽的细线")])]),r("br"),r("em",[r("a",{attrs:{href:"http://www.bozhiyue.com/html5/2016/0629/212509.html"}},[s._v("HTML5 Canvas画图教程(3)—canvas出现1像素线条模糊不清的原因")])]),r("br"),r("em",[r("a",{attrs:{href:"https://segmentfault.com/q/1010000006786067"}},[s._v("html canvas绘制1px直线时出现的模糊问题。。线的粗细不同是bug么?")])])]),r("p",[s._v("接下来我们需要一个15x15二维数组"),r("code",{pre:!0},[s._v("chessData")]),s._v("来记录棋盘信息，不同类型的棋子对应二维数组中不同的值。")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//初始化棋盘信息")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("initChessData")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n    chessData = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v(");\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" x = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; x < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v("; x++) {\n        chessData[x] = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v(");\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" y = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; y < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v("; y++) {\n            chessData[x][y] = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//初始化0为没有走过的，1为cross走的，2为circle走的")]),s._v("\n        }\n    }\n}\n")])]),r("p",[s._v("用canvas封装的"),r("code",{pre:!0},[s._v("arc")]),s._v("函数可以很轻松的画出圆形：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//绘制circle棋子")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("drawChessCircle")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("x, y")]),s._v(") ")]),s._v("{\n    canvas = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".getElementById("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"canvas"')]),s._v(");\n    context = canvas.getContext("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"2d"')]),s._v(");\n    context.lineWidth = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(";\n    context.strokeStyle = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"#e74c3c"')]),s._v(";\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" offset = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n\n    context.beginPath();\n    context.arc(x + offset, y + offset, "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("9")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".PI * "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(");\n    context.closePath();\n    context.stroke();\n}\n")])]),r("p",[s._v("画一个叉形其实就是画两条相交的直线，画圆的函数传入参数为圆心的坐标，画叉的函数传入的坐标为两条直线相交的坐标，因此需要根据相交点的坐标分别求出直线四个端点的坐标，算法不难，直接上代码：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//绘制cross棋子")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("drawChessCross")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("x, y")]),s._v(") ")]),s._v("{\n    canvas = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".getElementById("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"canvas"')]),s._v(");\n    context = canvas.getContext("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"2d"')]),s._v(");\n    context.lineWidth = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(";\n    context.strokeStyle = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"#2ecc71"')]),s._v(";\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" crossRadius = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("8")]),s._v(";\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" offset = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n\n    context.beginPath();\n    context.moveTo(x + offset - crossRadius, y + offset - crossRadius);\n    context.lineTo(x + offset + crossRadius, y + offset + crossRadius);\n    context.lineCap = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"round"')]),s._v(";\n    context.stroke();\n\n    context.beginPath();\n    context.moveTo(x + offset + crossRadius, y + offset - crossRadius);\n    context.lineTo(x + offset - crossRadius, y + offset + crossRadius);\n    context.lineCap = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"round"')]),s._v(";\n    context.stroke();\n}\n")])]),r("p",[s._v("界面的绘制部分到此就基本完成了，接下来我们给canvas画布添加点击事件。")]),r("h2",[s._v("添加点击事件")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//鼠标点击事件")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("play")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("e")]),s._v(") ")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//判断该局是否结束")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (isWell) {\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"本局已结束，重玩请刷新"')]),s._v(");\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(";\n    }\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" bbox = canvas.getBoundingClientRect();\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//计算鼠标点击的区域")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" x = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("parseInt")]),s._v("((e.clientX - bbox.left) / "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(");\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" y = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("parseInt")]),s._v("((e.clientY - bbox.top) / "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(");\n\n    curUser = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//设置当前玩家为cross")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (curUser == "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n        chessType = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//设置当前棋子类型为cross")]),s._v("\n    } "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        chessType = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(";\n    }\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//判断该位置是否有棋子")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (chessData[x][y] != "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(") {\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(";\n    }\n\n    generateManChess(x, y);\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (isWell) {\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"你赢了"')]),s._v(");\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(";\n    }\n\n    generateAIChess();\n}\n")])]),r("blockquote",[r("p",[s._v("Tips："),r("code",{pre:!0},[s._v("isWell")]),s._v("、"),r("code",{pre:!0},[s._v("curUser")]),s._v("、"),r("code",{pre:!0},[s._v("chessType")]),s._v("均为全局变量，游戏开始后便读取其初始值。（见源码）")])]),r("p",[s._v("因为我们要模拟人类与电脑下棋的过程，所以需要两个函数来生成人类和电脑的棋子，他们分别是"),r("code",{pre:!0},[s._v("generateManChess")]),s._v("和"),r("code",{pre:!0},[s._v("generateAIChess")]),s._v("函数。"),r("br"),s._v(" 目前还没实现AI，所以"),r("code",{pre:!0},[s._v("generateAIChess")]),s._v("暂时采用取随机数的方式来体现电脑下棋的效果。")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//生成人类棋子")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("generateManChess")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("x, y")]),s._v(") ")]),s._v("{\n    drawChess(x, y, chessType);"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//绘制cross棋子")]),s._v("\n    checkWin(x, y, chessType);\n}\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//生成AI棋子")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("generateAIChess")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" x;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" y;\n\n    curUser = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(";"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//设置当前玩家为circle")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (curUser == "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n        chessType = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n    } "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        chessType = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(";"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//设置当前棋子类型为circle")]),s._v("\n    }\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("while")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n        x = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".floor("),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".random()*"),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(") + "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".floor("),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".random()*"),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(");\n        y = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".floor("),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".random()*"),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v(") + "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".floor("),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".random()*"),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(");\n\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (chessData[x][y] == "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(") {\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n        }\n    }\n\n    drawChess(x, y, chessType);\n    checkWin(x, y, chessType);\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (isWell) {\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"你输了"')]),s._v(");\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(";\n    }\n}\n")])]),r("h2",[s._v("棋局判负逻辑")]),r("p",[s._v("最后要实现的便是游戏的判负逻辑，但是由于五子棋的特殊性，判负并不像象棋那么简单。玩过五子棋的都知道，取得胜利的条件就是让五个子连成一线，所以我们就需要遍历整个棋盘的二维数组，来获取是否有连续的五个棋子连成了一条线。那么这里的思路就是，设置4个变量来计数，当棋盘上每出现一个棋子，就获取这个棋子周围每个方向的情况，如果某个方向上有同类的棋子就让这个方向的变量值+1，最后统计每个变量值是否大于等于5。")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//判断胜负")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("checkWin")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("x, y, chessType")]),s._v(") ")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//设置每个方向的连子计数")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" countLeftRight = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" countUpDown = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" countUpperLeftToLowerRight = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//左上到右下")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" countUpperRightToLowerLeft = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//右上到左下")]),s._v("\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//左右判断")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = x; i >= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i--) {\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (chessData[i][y] != chessType) {\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n        }\n        countLeftRight++;\n    }\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = x + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v("; i++) {\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (chessData[i][y] != chessType) {\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n        }\n        countLeftRight++;\n    }\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//上下判断")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = y; i >= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i--) {\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (chessData[x][i] != chessType) {\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n        }\n        countUpDown++;\n    }\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = y + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v("; i++) {\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (chessData[x][i] != chessType) {\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n        }\n        countUpDown++;\n    }\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//左上右下判断")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" t = y;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" w = y + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = x; i >= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i--) {\n\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (chessData[i][t] != chessType) {\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n        }\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (t >= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(") {\n            t = t - "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n        }\n        countUpperLeftToLowerRight++;\n    }\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = x + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v("; i++) {\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (chessData[i][w] != chessType) {\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n        }\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (w < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v(") {\n            w = w + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n        }\n        countUpperLeftToLowerRight++;\n    }\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//右上左下判断")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" h = y;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" z = y + "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = x; i < "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v("; i++) {\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (chessData[i][h] != chessType) {\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n        }\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (h >= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(") {\n            h--;\n        }\n        countUpperRightToLowerLeft++;\n    }\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = x - "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i >= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i--) {\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (chessData[i][z] != chessType) {\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n        }\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (z <= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v(") {\n            z++;\n        }\n        countUpperRightToLowerLeft++;\n    }\n\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (countLeftRight >= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(" || countUpDown >= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(" || countUpperLeftToLowerRight >= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(" || countUpperRightToLowerLeft >= "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(") {\n        isWell = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(";"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//设置该局已经获胜，不可以再走了")]),s._v("\n    }\n}\n")])]),r("p",[s._v("至此，一个简单的对弈效果就实现出来了，只是我们现在还没有给电脑添加AI，所以电脑看起来还很傻，没有“智商”。从下一篇文章开始我们就正式进入AI的部分，第三篇文章将会介绍一个棋类AI的常用算法并实现它。")]),r("blockquote",[r("p",[s._v("Tips：本系列的文章并不是一个完整作品的实现教程，博主也是边做边写文章，所以文章里贴出来的代码也许并不是最终版本的代码，但是或多或少代表了一个版本的基本实现思路，仅供参考。")])]),r("p",[s._v("本项目的Github地址："),r("em",[s._v("https://github.com/csd758371536/GomokuWithAI")]),r("br"),s._v(" 在线演示页面："),r("em",[s._v("http://gomoku.csdoker.com/")])])])}],n=r("2877"),p={},l=Object(n["a"])(p,t,e,!1,null,null,null);a["default"]=l.exports}}]);