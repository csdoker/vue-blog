(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["article22"],{1900:function(s,a,r){"use strict";r.r(a);var t=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},e=[function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("section",[r("h2",[s._v("第六章：面向对象的程序设计")]),r("p",[s._v("ECMA-262的对象定义：“无序属性的集合，其属性可以包含基本值、对象或者函数。”")]),r("h3",[s._v("理解对象")]),r("p",[s._v("创建自定义对象：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 创建一个 Object 的实例")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v("();\nperson.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(";\nperson.age = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(";\nperson.job = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(";\nperson.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 对象字面量")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("age")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("job")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("sayName")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n    }\n};\n")])]),r("h4",[s._v("属性类型")]),r("p",[s._v("ECMAScript中有两种属性：数据属性和访问器属性。")]),r("h5",[s._v("数据属性")]),r("p",[s._v("直接在对象上定义的属性，它们的[[Configurable]]、[[Enumerable]]和[[Writable]]特性都被设置为true，而[[Value]]特性被设置为指定的值：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v("\n};\n")])]),r("p",[s._v("修改属性默认的特性，必须使用ECMAScript5的Object.defineProperty()方法：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('// "Nicholas"是只读的，这个属性的值是不可修改的')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = {};\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".defineProperty(person, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(", {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("writable")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v("\n});\nalert(person.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\nperson.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(";\nalert(person.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('// "Nicholas"是不可配置的，不能从对象中删除属性')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = {};\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".defineProperty(person, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(", {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("configurable")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v("\n});\nalert(person.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("delete")]),s._v(" person.name;\nalert(person.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 一旦把属性定义为不可配置的，就不能再把它变回可配置了")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = {};\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".defineProperty(person, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(", {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("configurable")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v("\n});\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//抛出错误")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".defineProperty(person, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(", {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("configurable")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v("\n});\n")])]),r("h5",[s._v("访问器属性")]),r("p",[s._v("在读取访问器属性时，会调用getter函数，这个函数负责返回有效的值；在写入访问器属性时，会调用setter函数并传入新值，这个函数负责决定如何处理数据：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" book = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("_year")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2004")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("edition")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".defineProperty(book, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"year"')]),s._v(", {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("get")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._year;\n    },\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("set")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("newValue")]),s._v(")")]),s._v("{\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (newValue > "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2004")]),s._v(") {\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._year = newValue;\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".edition += newValue - "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2004")]),s._v(";\n        }\n    }\n});\nbook.year = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2005")]),s._v(";\nalert(book.edition); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//2")]),s._v("\n")])]),r("h4",[s._v("定义多个属性")]),r("p",[s._v("利用Object.definePro-perties()方法可以通过描述符一次定义多个属性：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" book = {};\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".defineProperties(book, {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("_year")]),s._v(": {\n        "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2004")]),s._v("\n    },\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("edition")]),s._v(": {\n        "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n    },\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("year")]),s._v(": {\n        "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("get")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._year;\n        },\n        "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("set")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("newValue")]),s._v(")")]),s._v("{\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (newValue > "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2004")]),s._v(") {\n                "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._year = newValue;\n                "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".edition += newValue - "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2004")]),s._v(";\n            }\n        }\n    }\n});\n")])]),r("h4",[s._v("读取属性的特性")]),r("p",[s._v("Object.getOwnPropertyDescriptor()方法可以取得给定属性的描述符：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" book = {};\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".defineProperties(book, {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("_year")]),s._v(": {\n        "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2004")]),s._v("\n    },\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("edition")]),s._v(": {\n        "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n    },\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("year")]),s._v(": {\n        "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("get")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._year;\n        },\n        "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("set")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("newValue")]),s._v(")")]),s._v("{\n            "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (newValue > "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2004")]),s._v(") {\n                "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v("._year = newValue;\n                "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".edition += newValue - "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2004")]),s._v(";\n            }\n        }\n    }\n});\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" descriptor = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".getOwnPropertyDescriptor(book, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"_year"')]),s._v(");\nalert(descriptor.value); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//2004")]),s._v("\nalert(descriptor.configurable); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\nalert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" descriptor.get); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"undefined"')]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" descriptor = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".getOwnPropertyDescriptor(book, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"year"')]),s._v(");\nalert(descriptor.value); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//undefined")]),s._v("\nalert(descriptor.enumerable); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\nalert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" descriptor.get); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"function"')]),s._v("\n")])]),r("h3",[s._v("创建对象")]),r("h4",[s._v("工厂模式")]),r("p",[s._v("工厂模式抽象了创建具体对象的过程，用函数来封装以特定接口创建对象的细节（虽然解决了创建多个相似对象的问题，但却没有解决对象识别的问题）：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("createPerson")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age, job")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" o = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v("();\n    o.name = name;\n    o.age = age;\n    o.job = job;\n    o.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n    };\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" o;\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = createPerson("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(");\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = createPerson("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Doctor"')]),s._v(");\n")])]),r("h4",[s._v("构造函数模式")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age, job")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name = name;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age = age;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".job = job;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n    };\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(");\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Doctor"')]),s._v(");\n")])]),r("p",[s._v("person1和person2都有一个constructor（构造函数）属性，该属性指向Person：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("alert(person1.constructor == Person); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(person2.constructor == Person); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("p",[s._v("在这个例子中创建的所有对象既是Object的实例，同时也是Person的实例：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("alert(person1 "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v("); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(person1 "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" Person); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(person2 "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v("); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(person2 "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" Person); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("h5",[s._v("将构造函数当作函数")]),r("p",[s._v("任何函数，只要通过new操作符来调用，那它就可以作为构造函数；而任何函数，如果不通过new操作符来调用，那它跟普通函数也不会有什么两样：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 当作构造函数使用")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(");\nperson.sayName(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 作为普通函数调用")]),s._v("\nPerson("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Doctor"')]),s._v("); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 添加到 window")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".sayName(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Greg"')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 在另一个对象的作用域中调用")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" o = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v("();\nPerson.call(o, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Kristen"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("25")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nurse"')]),s._v(");\no.sayName(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Kristen"')]),s._v("\n")])]),r("h5",[s._v("构造函数的问题")]),r("p",[s._v("使用构造函数的主要问题，就是每个方法都要在每个实例上重新创建一遍，person1和person2都有一个名为sayName()的方法，但那两个方法不是同一个Function的实例：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age, job")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name = name;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age = age;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".job = job;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".sayName = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"alert(this.name)"')]),s._v("); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 与声明函数在逻辑上是等价的")]),s._v("\n}\n\nalert(person1.sayName == person2.sayName); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// false")]),s._v("\n")])]),r("p",[s._v("可以通过把函数定义转移到构造函数外部来解决这个问题：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age, job")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name = name;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age = age;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".job = job;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".sayName = sayName;\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("sayName")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(");\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Doctor"')]),s._v(");\n")])]),r("p",[s._v("在全局作用域中定义的函数实际上只能被某个对象调用，如果对象需要定义很多方法，那么就要定义很多个全局函数，于是我们这个自定义的引用类型就丝毫没有封装性可言了，这些问题可以通过使用原型模式来解决。")]),r("h4",[s._v("原型模式")]),r("p",[s._v("prototype （原型）属性指向一个对象，这个对象的用途是包含可以由特定类型的所有实例共享的属性和方法，使用原型对象的好处是可以让所有对象实例共享它所包含的属性和方法：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n\n}\nPerson.prototype.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(";\nPerson.prototype.age = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(";\nPerson.prototype.job = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(";\nPerson.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nperson1.sayName(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nperson2.sayName(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\nalert(person1.sayName == person2.sayName); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("h5",[s._v("理解原型对象")]),r("p",[s._v("所有原型对象都会自动获得一个constructor（构造函数）属性，这个属性包含一个指向prototype属性所在函数的指针：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("Person.prototype.constructor = Person "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// true")]),s._v("\n")])]),r("p",[s._v("当调用构造函数创建一个新实例后，该实例的内部将包含一个指针（内部属性[[Prototype]]），指向构造函数的原型对象，如果 [[Prototype]]指向调用isPrototypeOf()方法的对象（Person.prototype），那么这个方法就返回true：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("alert(Person.prototype.isPrototypeOf(person1)); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(Person.prototype.isPrototypeOf(person2)); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("p",[s._v("Object.getPrototypeOf()返回[[Prototype]]的值：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("alert("),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".getPrototypeOf(person1) == Person.prototype); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert("),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".getPrototypeOf(person1).name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\n")])]),r("p",[s._v("可以通过对象实例访问保存在原型中的值，但却不能通过对象实例重写原型中的值，在实例中创建该属性，该属性将会屏蔽原型中的那个属性：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\nPerson.prototype.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(";\nPerson.prototype.age = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(";\nPerson.prototype.job = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(";\nPerson.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nperson1.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(";\nalert(person1.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Greg" —— 来自实例')]),s._v("\nalert(person2.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas" —— 来自原型')]),s._v("\n")])]),r("p",[s._v("使用delete操作符则可以完全删除实例属性，从而让我们能够重新访问原型中的属性：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\nPerson.prototype.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(";\nPerson.prototype.age = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(";\nPerson.prototype.job = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(";\nPerson.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nperson1.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(";\nalert(person1.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Greg" —— 来自实例')]),s._v("\nalert(person2.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas" —— 来自原型')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("delete")]),s._v(" person1.name;\nalert(person1.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas" —— 来自原型')]),s._v("\n")])]),r("p",[s._v("hasOwnProperty()方法可以检测一个属性是存在于实例中，还是存在于原型中：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\nPerson.prototype.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(";\nPerson.prototype.age = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(";\nPerson.prototype.job = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(";\nPerson.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nalert(person1.hasOwnProperty("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\nperson1.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(";\nalert(person1.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Greg"——来自实例')]),s._v("\nalert(person1.hasOwnProperty("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(person2.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"——来自原型')]),s._v("\nalert(person2.hasOwnProperty("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("delete")]),s._v(" person1.name;\nalert(person1.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"——来自原型')]),s._v("\nalert(person1.hasOwnProperty("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false    ")]),s._v("\n")])]),r("h5",[s._v("原型与in操作符")]),r("p",[s._v("in操作符会在通过对象能够访问给定属性时返回true，无论该属性存在于实例中还是原型中：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\nPerson.prototype.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(";\nPerson.prototype.age = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(";\nPerson.prototype.job = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(";\nPerson.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nalert(person1.hasOwnProperty("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\nalert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" person1); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nperson1.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(";\nalert(person1.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Greg" ——来自实例')]),s._v("\nalert(person1.hasOwnProperty("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" person1); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(person2.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas" ——来自原型')]),s._v("\nalert(person2.hasOwnProperty("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\nalert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" person2); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("delete")]),s._v(" person1.name;\nalert(person1.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas" ——来自原型')]),s._v("\nalert(person1.hasOwnProperty("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\nalert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" person1); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("p",[s._v("同时使用"),r("code",{pre:!0},[s._v("hasOwnProperty()")]),s._v("方法和in操作符，就可以确定该属性到底是存在于对象中，还是存在于原型中：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("hasPrototypeProperty")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("object, name")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" !object.hasOwnProperty(name) && (name "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" object);\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\nPerson.prototype.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(";\nPerson.prototype.age = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(";\nPerson.prototype.job = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(";\nPerson.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nalert(hasPrototypeProperty(person, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nperson.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(";\nalert(hasPrototypeProperty(person, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\n")])]),r("p",[s._v("Object.keys()方法可以取得对象上所有可枚举的实例属性：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\nPerson.prototype.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(";\nPerson.prototype.age = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(";\nPerson.prototype.job = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(";\nPerson.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" keys = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".keys(Person.prototype);\nalert(keys); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"name,age,job,sayName"')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" p1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\np1.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Rob"')]),s._v(";\np1.age = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("31")]),s._v(";\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" p1keys = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".keys(p1);\nalert(p1keys); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"name,age"')]),s._v("\n")])]),r("p",[s._v("Object.getOwnPropertyNames()得到所有实例属性，无论它是否可枚举：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" keys = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".getOwnPropertyNames(Person.prototype);\nalert(keys); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"constructor,name,age,job,sayName"')]),s._v("\n")])]),r("h5",[s._v("更简单的原型语法")]),r("p",[s._v("用一个包含所有属性和方法的对象字面量来重写整个原型对象，重写后constructor属性不再指向Person了：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\nPerson.prototype = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("age")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("job")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("sayName")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n    }\n};\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" friend = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nalert(friend "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v("); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(friend "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" Person); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(friend.constructor == Person); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\nalert(friend.constructor == "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v("); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("p",[s._v("可以将constructor属性的值重设为Person：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\nPerson.prototype = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("constructor")]),s._v(" : Person,\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("age")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("job")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("sayName")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n    }\n};\n")])]),r("p",[s._v("或者可以使用Object.defineProperty()：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 重设构造函数，只适用于 ECMAScript 5  兼容的浏览器")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".defineProperty(Person.prototype, "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"constructor"')]),s._v(", {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("enumerable")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": Person\n});\n")])]),r("h5",[s._v("原型的动态性")]),r("p",[s._v("对原型对象所做的任何修改都能够立即从实例上反映出来：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" friend = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nPerson.prototype.sayHi = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"hi"')]),s._v(");\n};\nfriend.sayHi(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"hi"（没有问题！）')]),s._v("\n")])]),r("p",[s._v("如果重写整个原型对象，切断了现有原型与任何之前已经存在的对象实例之间的联系，它们引用的仍然是最初的原型：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" friend = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nPerson.prototype = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("constructor")]),s._v(": Person,\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("age")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("job")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("sayName")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n    }\n};\nfriend.sayName(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//error")]),s._v("\n")])]),r("h5",[s._v("原生对象的原型")]),r("p",[s._v("所有原生引用类型（Object、Array、String等）都在其构造函数的原型上定义了方法：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v(".prototype.sort); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"function"')]),s._v("\nalert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("String")]),s._v(".prototype.substring); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"function"')]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("String")]),s._v(".prototype.startsWith = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("text")]),s._v(") ")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".indexOf(text) == "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" msg = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hello world!"')]),s._v(";\nalert(msg.startsWith("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Hello"')]),s._v(")); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("h5",[s._v("原型对象的问题")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\nPerson.prototype = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("constructor")]),s._v(": Person,\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("age")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("job")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("friends")]),s._v(" : ["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Shelby"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Court"')]),s._v("],\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("sayName")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n    }\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person();\nperson1.friends.push("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Van"')]),s._v(");\nalert(person1.friends); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Shelby,Court,Van"')]),s._v("\nalert(person2.friends); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Shelby,Court,Van"')]),s._v("\nalert(person1.friends === person2.friends); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("p",[s._v("修改了person1.friends引用的数组也会通过person2.friends（与person1.friends指向同一个数组）反映出来。")]),r("h4",[s._v("组合使用构造函数模式和原型模式")]),r("p",[s._v("构造函数模式用于定义实例属性，而原型模式用于定义方法和共享的属性：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age, job")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name = name;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age = age;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".job = job;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".friends = ["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Shelby"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Court"')]),s._v("];\n}\nPerson.prototype = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("constructor")]),s._v(" : Person,\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("sayName")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n    }\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(");\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Doctor"')]),s._v(");\nperson1.friends.push("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Van"')]),s._v(");\nalert(person1.friends); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Shelby,Count,Van"')]),s._v("\nalert(person2.friends); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Shelby,Count"')]),s._v("\nalert(person1.friends === person2.friends); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\nalert(person1.sayName === person2.sayName); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("h4",[s._v("动态原型模式")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age, job")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//属性")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name = name;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age = age;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".job = job;\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 方法")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".sayName != "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"function"')]),s._v("){\n            Person.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n            alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n        };\n    }\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" friend = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(");\nfriend.sayName();\n")])]),r("h4",[s._v("寄生构造函数模式")]),r("p",[s._v("基本思想是创建一个函数，该函数的作用仅仅是封装创建对象的代码，然后再返回新创建的对象：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age, job")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" o = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v("();\n    o.name = name;\n    o.age = age;\n    o.job = job;\n    o.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n    };\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" o;\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" friend = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Person("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(");\nfriend.sayName(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\n")])]),r("p",[s._v("创建一个具有额外方法的特殊数组。由于不能直接修改Array构造函数，因此可以使用这个模式：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SpecialArray")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//创建数组")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" values = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Array")]),s._v("();\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//添加值")]),s._v("\n    values.push.apply(values, "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("arguments")]),s._v(");\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//添加方法")]),s._v("\n    values.toPipedString = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".join("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"|"')]),s._v(");\n    };\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//返回数组")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" values;\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" colors = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SpecialArray("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"red"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"blue"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"green"')]),s._v(");\nalert(colors.toPipedString()); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"red|blue|green"')]),s._v("\n")])]),r("h4",[s._v("稳妥构造函数模式")]),r("p",[s._v("稳妥对象，指的是没有公共属性，而且其方法也不引用this的对象：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Person")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age, job")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//创建要返回的对象")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" o = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v("();\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可以在这里定义私有变量和函数")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//添加方法")]),s._v("\n    o.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n        alert(name);\n    };\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//返回对象")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" o;\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" friend = Person("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Software Engineer"')]),s._v(");\nfriend.sayName(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas"')]),s._v("\n")])]),r("p",[s._v("变量friend中保存的是一个稳妥对象，而除了调用sayName()方法外，没有别的方式可以访问其数据成员")]),r("h3",[s._v("继承")]),r("h4",[s._v("原型链")]),r("p",[s._v("原型链作为实现继承的主要方法，其基本思想是利用原型让一个引用类型继承另一个引用类型的属性和方法，基本模式代码大致如下：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SuperType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".property = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(";\n}\nSuperType.prototype.getSuperValue = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".property;\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SubType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".subproperty = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(";\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//继承了 SuperType")]),s._v("\nSubType.prototype = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SuperType();\nSubType.prototype.getSubValue = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".subproperty;\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" instance = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SubType();\nalert(instance.getSuperValue()); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("h5",[s._v("别忘记默认的原型")]),r("p",[s._v("所有函数的默认原型都是Object的实例，因此默认原型都会包含一个内部指针，指向Object.prototype。SubType继承了SuperType，而SuperType继承了Object。当调用instance.toString()时，实际上调用的是保存在Object.prototype中的那个方法。")]),r("h5",[s._v("确定原型和实例的关系")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("alert(instance "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v("); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(instance "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" SuperType); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(instance "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" SubType); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n\nalert("),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".prototype.isPrototypeOf(instance)); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(SuperType.prototype.isPrototypeOf(instance)); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\nalert(SubType.prototype.isPrototypeOf(instance)); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//true")]),s._v("\n")])]),r("h5",[s._v("谨慎地定义方法")]),r("p",[s._v("给原型添加或重写方法的代码一定要放在替换原型的语句之后，并且不能使用对象字面量创建原型方法：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SuperType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".property = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(";\n}\nSuperType.prototype.getSuperValue = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".property;\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SubType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".subproperty = "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(";\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//继承了 SuperType")]),s._v("\nSubType.prototype = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SuperType();\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 添加新方法")]),s._v("\nSubType.prototype.getSubValue = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".subproperty;\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 重写超类型中的方法")]),s._v("\nSubType.prototype.getSuperValue = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(";\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" instance = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SubType();\nalert(instance.getSuperValue()); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//false")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 使用字面量添加新方法，会导致上一行代码无效")]),s._v("\nSubType.prototype = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getSubValue")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".subproperty;\n    },\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("someOtherMethod")]),s._v(" : "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n        "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(";\n    }\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" instance = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SubType();\nalert(instance.getSuperValue()); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//error!")]),s._v("\n")])]),r("h5",[s._v("原型链的问题")]),r("p",[s._v("在通过原型来实现继承时，原型实际上会变成另一个类型的实例：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SuperType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".colors = ["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"red"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"blue"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"green"')]),s._v("];\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SubType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//继承了 SuperType")]),s._v("\nSubType.prototype = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SuperType();\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" instance1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SubType();\ninstance1.colors.push("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"black"')]),s._v(");\nalert(instance1.colors); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"red,blue,green,black"')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" instance2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SubType();\nalert(instance2.colors); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"red,blue,green,black"    ')]),s._v("\n")])]),r("p",[s._v("原型链的第二个问题是：在创建子类型的实例时，不能向超类型的构造函数中传递参数。")]),r("h4",[s._v("借用构造函数")]),r("p",[s._v("通过使用apply()和call()方法可以在（将来）新创建的对象上执行构造函数：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SuperType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".colors = ["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"red"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"blue"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"green"')]),s._v("];\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SubType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 继承了 SuperType")]),s._v("\n    SuperType.call("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(");\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" instance1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SubType();\ninstance1.colors.push("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"black"')]),s._v(");\nalert(instance1.colors); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"red,blue,green,black"')]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" instance2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SubType();\nalert(instance2.colors); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"red,blue,green"')]),s._v("\n")])]),r("p",[s._v("借用构造函数有一个很大的优势，可以在子类型构造函数中向超类型构造函数传递参数：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SuperType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name = name;\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SubType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//继承了 SuperType，同时还传递了参数")]),s._v("\n    SuperType.call("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(");\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//实例属性")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age = "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(";\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" instance = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SubType();\nalert(instance.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas";')]),s._v("\nalert(instance.age); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//29")]),s._v("\n")])]),r("h4",[s._v("组合继承")]),r("p",[s._v("组合继承指的是将原型链和借用构造函数的技术组合到一块，从而发挥二者之长的一种继承模式，使用原型链实现对原型属性和方法的继承，而通过借用构造函数来实现对实例属性的继承：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SuperType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name = name;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".colors = ["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"red"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"blue"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"green"')]),s._v("];\n}\nSuperType.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SubType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//继承属性")]),s._v("\n    SuperType.call("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(", name);\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age = age;\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//继承方法")]),s._v("\nSubType.prototype = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SuperType();\nSubType.prototype.constructor = SubType;\nSubType.prototype.sayAge = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" instance1 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SubType("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(");\ninstance1.colors.push("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"black"')]),s._v(");\nalert(instance1.colors); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"red,blue,green,black"')]),s._v("\ninstance1.sayName(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Nicholas";')]),s._v("\ninstance1.sayAge(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//29")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" instance2 = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SubType("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(");\nalert(instance2.colors); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"red,blue,green"')]),s._v("\ninstance2.sayName(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Greg";')]),s._v("\ninstance2.sayAge(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//27")]),s._v("\n")])]),r("p",[s._v("两个不同的SubType实例既分别拥有自己属性——包括colors属性，又可以使用相同的方法。")]),r("h4",[s._v("原型式继承")]),r("p",[s._v("借助原型可以基于已有的对象创建新对象，同时还不必因此创建自定义类型：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("object")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("o")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("F")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{}\n    F.prototype = o;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" F();\n}\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("friends")]),s._v(": ["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Shelby"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Court"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Van"')]),s._v("]\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" anotherPerson = object(person);\nanotherPerson.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(";\nanotherPerson.friends.push("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Rob"')]),s._v(");\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" yetAnotherPerson = object(person);\nyetAnotherPerson.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Linda"')]),s._v(";\nyetAnotherPerson.friends.push("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Barbie"')]),s._v(");\nalert(person.friends); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Shelby,Court,Van,Rob,Barbie"')]),s._v("\n")])]),r("p",[s._v("person.friends不仅属于person所有，而且也会被anotherPerson以及yetAnotherPerson共享。实际上，这就相当于又创建了person对象的两个副本。"),r("br"),s._v(" Object.create()方法规范化了原型式继承。这个方法接收两个参数：一个用作新对象原型的对象和（可选的）一个为新对象定义额外属性的对象：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("friends")]),s._v(": ["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Shelby"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Court"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Van"')]),s._v("]\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" anotherPerson = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".create(person);\nanotherPerson.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v(";\nanotherPerson.friends.push("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Rob"')]),s._v(");\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" yetAnotherPerson = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".create(person);\nyetAnotherPerson.name = "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Linda"')]),s._v(";\nyetAnotherPerson.friends.push("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Barbie"')]),s._v(");\nalert(person.friends); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Shelby,Court,Van,Rob,Barbie"')]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" anotherPerson = "),r("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".create(person, {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": {\n        "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Greg"')]),s._v("\n    }\n});\nalert(anotherPerson.name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"Greg"')]),s._v("\n")])]),r("h4",[s._v("寄生式继承")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("createAnother")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("original")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" clone = object(original); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//通过调用函数创建一个新对象")]),s._v("\n    clone.sayHi = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{ "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//以某种方式来增强这个对象")]),s._v("\n        alert("),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"hi"')]),s._v(");\n    };\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" clone; "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//返回这个对象")]),s._v("\n}\n\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" person = {\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Nicholas"')]),s._v(",\n    "),r("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("friends")]),s._v(": ["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Shelby"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Court"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Van"')]),s._v("]\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" anotherPerson = createAnother(person);\nanotherPerson.sayHi(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('//"hi"')]),s._v("\n")])]),r("h4",[s._v("寄生组合式继承")]),r("p",[s._v("组合继承最大的问题就是无论什么情况下，都会调用两次超类型构造函数：一次是在创建子类型原型的时候，另一次是在子类型构造函数内部：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SuperType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name = name;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".colors = ["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"red"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"blue"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"green"')]),s._v("];\n}\nSuperType.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SubType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age")]),s._v(")")]),s._v("{\n    SuperType.call("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(", name); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 第二次调用 SuperType()")]),s._v("\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age = age;\n}\nSubType.prototype = "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" SuperType(); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 第一次调用 SuperType()")]),s._v("\nSubType.prototype.constructor = SubType;\nSubType.prototype.sayAge = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age);\n};\n")])]),r("p",[s._v("一组在实例上，一组在 SubType 原型中。这就是调用两次SuperType构造函数的结果，不必为了指定子类型的原型而调用超类型的构造函数，我们所需要的无非就是超类型原型的一个副本而已。本质上，就是使用寄生式继承来继承超类型的原型，然后再将结果指定给子类型的原型：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("inheritPrototype")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("subType, superType")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" prototype = object(superType.prototype); "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//创建对象")]),s._v("\n    prototype.constructor = subType; "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//增强对象")]),s._v("\n    subType.prototype = prototype; "),r("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//指定对象")]),s._v("\n}\n")])]),r("p",[s._v("调用inherit-Prototype()函数的语句，去替换前面例子中为子类型原型赋值的语句了：")]),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SuperType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name")]),s._v(")")]),s._v("{\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name = name;\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".colors = ["),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"red"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"blue"')]),s._v(", "),r("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"green"')]),s._v("];\n}\nSuperType.prototype.sayName = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".name);\n};\n"),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("SubType")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age")]),s._v(")")]),s._v("{\n    SuperType.call("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(", name);\n    "),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age = age;\n}\ninheritPrototype(SubType, SuperType);\nSubType.prototype.sayAge = "),r("span",{pre:!0,attrs:{class:"hljs-function"}},[r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),r("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n    alert("),r("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".age);\n};\n")])])])}],n=r("2877"),p={},l=Object(n["a"])(p,t,e,!1,null,null,null);a["default"]=l.exports}}]);