(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["article26"],{"1fd4":function(s,a,t){"use strict";t.r(a);var r=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},e=[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("p",[s._v("日常工作中经常会发现有大量业务逻辑是重复的，而用别人的插件也不能完美解决一些定制化的需求，所以我决定把一些常用的组件抽离、封装出来，形成一套自己的插件库。同时，我将用这个教程系列记录下每一个插件的开发过程，手把手教你如何一步一步去造出一套实用性、可复用性高的轮子。")]),t("p",[s._v("So, Let's begin!")]),t("blockquote",[t("p",[s._v("目前项目使用 ES5及UMD 规范封装，所以在前端暂时只支持"),t("code",{pre:!0},[s._v("<script>")]),s._v("标签的引入方式，未来会逐步用 ES6 进行重构")])]),t("blockquote",[t("p",[s._v("演示地址："),t("em",[t("a",{attrs:{href:"https://csdoker.github.io/csdemos/pagination/"}},[s._v("pagination")])]),t("br"),s._v(" Github："),t("em",[t("a",{attrs:{href:"https://github.com/csdoker/csdwheels"}},[s._v("csdwheels")])]),t("br"),t("em",[s._v("不要吝啬你的Star哦~(〃'▽'〃)")])])]),t("p",[t("img",{attrs:{src:"https://i.loli.net/2018/07/26/5b592fc2c630f.gif",alt:"pagination"}})]),t("h1",[s._v("JavaScript模块化")]),t("p",[s._v("要开发一个JavaScript的插件，首先要从JavaScript的模块化讲起。"),t("br"),s._v(" 什么是模块化？简单的说就是让JavaScript能够以一个整体的方式去组织和维护代码，当多人开发时可以互相引用对方的代码块又不造成冲突。"),t("br"),t("code",{pre:!0},[s._v("ECMAScript6")]),s._v("标准之前常见的模块化规范有："),t("code",{pre:!0},[s._v("CommonJS")]),s._v("、"),t("code",{pre:!0},[s._v("AMD")]),s._v("、"),t("code",{pre:!0},[s._v("UMD")]),s._v("等，因为我们的代码暂时是采用ES5语法进行开发，所以我们选用UMD的规范来组织代码。"),t("br"),s._v(" 关于模块化的发展过程可以参考：")]),t("ul",[t("li",[t("a",{attrs:{href:"https://yuguo.us/weblog/javascript-module-development-history"}},[s._v("JavaScript模块化编程简史（2009-2016）")])]),t("li",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/26231889"}},[s._v("JavaScript模块演化简史")])])]),t("p",[s._v("在这种模块规范的标准之上，我们还需要一种机制来加载不同的模块，例如实现了AMD规范的require.js，其用法可以参考阮一峰写的这篇教程：")]),t("ul",[t("li",[t("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2012/11/require_js.html"}},[s._v("Javascript模块化编程（三）：require.js的用法")])])]),t("p",[s._v("因为我们开发的轮子暂时不涉及到多模块加载，所以模块的加载暂时不予过多讨论，读者可自己进行拓展学习。")]),t("p",[s._v("回到我们的主题上，在正式开发之前，还需要补充一点其他方面的知识。")]),t("h1",[s._v("自执行函数")]),t("p",[s._v("定义一个函数，ES5一般有三种方式：")]),t("ol",[t("li",[s._v("函数声明")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("foo")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{}\n")])]),t("p",[s._v("这样声明的函数和变量一样，会被自动提升，所以我们可以把函数声明放在调用它的语句后面：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("foo();\n"),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("foo")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{}\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("函数表达式")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" foo = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{}\n")])]),t("p",[s._v("右边其实是一个匿名函数，只不过赋值给了一个变量，我们可以通过这个变量名来调用它，但是和第一种方式不同的是，通过表达式声明的函数不会被提升。")]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("使用Function构造函数")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" foo = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Function")]),s._v(" ()\n")])]),t("p",[s._v("那么有没有一种办法，可以不写函数名，直接声明一个函数并自动调用它呢？"),t("br"),s._v(" 答案肯定的，那就是使用自执行函数。（实际上我的另一篇文章"),t("a",{attrs:{href:"https://rekodsc.com/detail/5"}},[s._v("打砖块——js面向对象初识")]),s._v("中就曾提到过）")]),t("p",[s._v("自执行函数"),t("code",{pre:!0},[s._v("Immediately-Invoked Function Expression")]),s._v("，顾名思义，就是自动执行的函数，有的地方也称为立即调用的函数表达式。"),t("br"),s._v(" 它的基本形式如下：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'hello'")]),s._v(")\n}());\n\n("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'hello'")]),s._v(")\n})();\n")])]),t("blockquote",[t("p",[s._v("两种写法是等效的，只不过前者让代码看起来更像是一个整体。")])]),t("p",[s._v("可以看到，这两种写法的作用其实就是在()内定义函数，然后又使用()来执行该函数，因此它就是自执行的。")]),t("p",[s._v("IIFE的一些好处如下：")]),t("ul",[t("li",[s._v("避免污染全局变量")]),t("li",[s._v("减少命名冲突")]),t("li",[s._v("惰性加载")])]),t("p",[s._v("最重要的一点，它可以创建一个独立的作用域，而在ES6之前JavaScript是没有块级作用域的。"),t("br"),s._v(" 利用这一点，我们可以很轻松的保证多个模块之间的变量不被覆盖了：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// libA.js")]),s._v("\n("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" num = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n})();\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// libB.js")]),s._v("\n("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(")")]),s._v("{\n\t"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" num = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(";\n})();\n")])]),t("p",[s._v("上面这两个文件模块中的作用域都是独立的，互不影响。（如果模块之间想要互相引用，就需要用到模块的加载器了，例如上面提到的"),t("code",{pre:!0},[s._v("require.js")]),s._v("等库）、")]),t("p",[s._v("在此基础上，我们就可以看看一个实现了UMD规范的IIFE模板是什么样子了：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// if the module has no dependencies, the above pattern can be simplified to")]),s._v("\n("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("root, factory")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" define === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'function'")]),s._v(" && define.amd) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// AMD. Register as an anonymous module.")]),s._v("\n        define([], factory);\n    } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(" === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'object'")]),s._v(" && "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(".exports) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Node. Does not work with strict CommonJS, but")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// only CommonJS-like environments that support module.exports,")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// like Node.")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(".exports = factory();\n    } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Browser globals (root is window)")]),s._v("\n        root.returnExports = factory();\n  }\n}("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" self !== "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'undefined'")]),s._v(" ? self : "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Just return a value to define the module export.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// This example returns an object, but the module")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// can return a function as the exported value.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {};\n}));\n")])]),t("p",[s._v("可以看到，UMD规范同时兼容了浏览器、Node环境及AMD规范，这样我们的代码使用UMD包装后就可以在不同的环境中运行了。")]),t("h1",[s._v("插件模板")]),t("p",[s._v("开发插件最重要的一点，就是插件的兼容性，一个插件至少要能同时在几种不同的环境中运行。其次，它还需要满足以下几种功能及条件：")]),t("ol",[t("li",[s._v("插件自身的作用域与用户当前的作用域相互独立，也就是插件内部的私有变量不能影响使用者的环境变量；")]),t("li",[s._v("插件需具备默认设置参数；")]),t("li",[s._v("插件除了具备已实现的基本功能外，需提供部分API，使用者可以通过该API修改插件功能的默认参数，从而实现用户自定义插件效果；")]),t("li",[s._v("插件支持链式调用；")]),t("li",[s._v("插件需提供监听入口，及针对指定元素进行监听，使得该元素与插件响应达到插件效果。")])]),t("p",[s._v("第一点我们利用UMD包装的方式已经实现了，现在来看看第二和第三点。")]),t("p",[s._v("通常情况下，一个插件内部会有默认参数，并且会提供一些参数让用户实现部分功能的自定义。那么怎么实现呢，这其实就是一个对象合并的问题，例如：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("extend")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("o, n, override")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" p "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" n) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (n.hasOwnProperty(p) && (!o.hasOwnProperty(p) || override))\n        o[p] = n[p];\n    }\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 默认参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" options = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageNumber")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageShow")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("\n};\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 用户设置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" userOptions = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageShow")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageCount")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v("\n}\n\nextend(options, userOptions, "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 合并后")]),s._v("\noptions = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageNumber")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageShow")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageCount")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v("\n}\n")])]),t("p",[s._v("如上，采用一个类似的"),t("code",{pre:!0},[s._v("extend")]),s._v("函数就可以实现对象的合并了，这样我们插件也就实现了设置参数的功能。")]),t("blockquote",[t("p",[s._v("这里的extend函数为浅拷贝，因为插件的用户参数一般是不会修改的，如果想实现深拷贝可参考jQuery中extend的实现方法。")])]),t("p",[s._v("第四点我们插件暂时不需要这样的功能，可以暂时不支持它。第五点在代码中我们会通过回调函数去逐步实现它。")]),t("p",[s._v("综上，我们就可以实现出一个基础的插件模板了：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v(";"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v('// JavaScript弱语法的特点,如果前面刚好有个函数没有以";"结尾,那么可能会有语法错误')]),s._v("\n("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("root, factory")]),s._v(") ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" define === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'function'")]),s._v(" && define.amd) {\n    define([], factory);\n  } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(" === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'object'")]),s._v(" && "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(".exports) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(".exports = factory();\n  } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n    root.Plugin = factory();\n  }\n}("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" self !== "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'undefined'")]),s._v(" ? self : "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'use strict'")]),s._v(";\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// tool")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("extend")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("o, n, override")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" p "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" n) {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (n.hasOwnProperty(p) && (!o.hasOwnProperty(p) || override))\n        o[p] = n[p];\n    }\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// polyfill")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" EventUtil = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("addEvent")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("element, type, handler")]),s._v(") ")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 添加绑定")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (element.addEventListener) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 使用DOM2级方法添加事件")]),s._v("\n        element.addEventListener(type, handler, "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(");\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (element.attachEvent) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 使用IE方法添加事件")]),s._v("\n        element.attachEvent("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"on"')]),s._v(" + type, handler);\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 使用DOM0级方法添加事件")]),s._v("\n        element["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"on"')]),s._v(" + type] = handler;\n      }\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 移除事件")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("removeEvent")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("element, type, handler")]),s._v(") ")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (element.removeEventListener) {\n        element.removeEventListener(type, handler, "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(");\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (element.datachEvent) {\n        element.detachEvent("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"on"')]),s._v(" + type, handler);\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        element["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"on"')]),s._v(" + type] = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(";\n      }\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getEvent")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(") ")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 返回事件对象引用")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" event ? event : "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".event;\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 获取mouseover和mouseout相关元素")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getRelatedTarget")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(") ")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (event.relatedTarget) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" event.relatedTarget;\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (event.toElement) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 兼容IE8-")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" event.toElement;\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (event.formElement) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" event.formElement;\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(";\n      }\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getTarget")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(") ")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//返回事件源目标")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" event.target || event.srcElement;\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("preventDefault")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(") ")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//取消默认事件")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (event.preventDefault) {\n        event.preventDefault();\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        event.returnValue = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(";\n      }\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("stopPropagation")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(") ")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (event.stopPropagation) {\n        event.stopPropagation();\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        event.cancelBubble = "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(";\n      }\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 获取mousedown或mouseup按下或释放的按钮是鼠标中的哪一个")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getButton")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(") ")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".implementation.hasFeature("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"MouseEvents"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"2.0"')]),s._v(")) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" event.button;\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//将IE模型下的button属性映射为DOM模型下的button属性")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("switch")]),s._v(" (event.button) {\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(":\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(":\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(":\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(":\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("7")]),s._v(":\n            "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//按下的是鼠标主按钮（一般是左键）")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(";\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(":\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(":\n            "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//按下的是中间的鼠标按钮")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(";\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(":\n            "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//鼠标次按钮（一般是右键）")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n        }\n      }\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//获取表示鼠标滚轮滚动方向的数值")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getWheelDelta")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(") ")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (event.wheelDelta) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" event.wheelDelta;\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" -event.detail * "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("40")]),s._v(";\n      }\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 以跨浏览器取得相同的字符编码，需在keypress事件中使用")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getCharCode")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("event")]),s._v(") ")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" event.charCode == "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"number"')]),s._v(") {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" event.charCode;\n      } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" event.keyCode;\n      }\n    }\n  };\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// plugin construct function")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Plugin")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("selector, userOptions")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Plugin() or new Plugin()")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (!("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" Plugin)) "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Plugin(selector, userOptions);\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".init(selector, userOptions)\n  }\n  Plugin.prototype = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("constructor")]),s._v(": Plugin,\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// default option")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("options")]),s._v(": {},\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("init")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("selector, userOptions")]),s._v(") ")]),s._v("{\n      extend("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options, userOptions, "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(");\n    }\n  };\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" Plugin;\n}));\n")])]),t("p",[s._v("这里还使用到了一个"),t("code",{pre:!0},[s._v("EventUtil")]),s._v("对象，它主要是针对事件注册的一些兼容性做了一些polyfill封装，具体原理可以参阅：")]),t("ul",[t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/hykun/p/EventUtil.html"}},[s._v("EventUtil——跨浏览器的事件对象")])]),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/vali/p/5881329.html"}},[s._v("跨浏览器的事件对象-------EventUtil 中的方法及用法")])])]),t("p",[s._v("到此，一个插件的基本模板就大致成型了。下一节，我们终于可以正式开始分页插件的开发了！")]),t("h1",[s._v("思路分析")]),t("blockquote",[t("p",[s._v("有人说计算机的本质就是对现实世界的抽象，而编程则是对这个抽象世界规则的制定。")])]),t("p",[s._v("正如上面这句话所说，在实际编码之前我们一般需要对要实现的需求效果进行一个思路的分析，最后再进一步把这个思路过程抽象为有逻辑的代码。"),t("br"),s._v(" 我们先看一下要实现的分页效果是什么样的，我把它分成两种情况，显示和不显示省略号的，首先来看第一种：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 总共30页")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 第一种情况：不显示省略号，当前页码前后最多显示2个页码")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v("\n...\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("13")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("17")]),s._v("\n...\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("25")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("26")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("26")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("26")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("26")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n")])]),t("p",[s._v("虽然上面每一个数字在实际应用中都是一个按钮或超链接，但现在既然是分析，我们不妨就把它简化并忽略，于是这个问题就变成了一个简单的字符串输出题。"),t("br"),s._v(" 我们先定义一个函数：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("showPages")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("page, total, show")]),s._v(") ")]),s._v("{\n\n}\n")])]),t("p",[s._v("函数传入的参数分别为：当前页码、总页码数、当前页码面前后最多显示页码数，然后我们需要循环调用这个函数打印分页：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" total = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v(";\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i <= total; i++) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(showPages(i, total));\n}\n")])]),t("p",[s._v("这样从页码为1到最后一页的结果就全输出了，最后我们需要完成"),t("code",{pre:!0},[s._v("showPages()")]),s._v("函数：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("showPages")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("page, total, show")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" str = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v(";\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (page < show + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i <= show * "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i++) {\n            str = str + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' '")]),s._v(" + i;\n        }\n    } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (page > total - show) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = total - show * "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("; i <= total; i++) {\n            str = str + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' '")]),s._v(" + i;\n        }\n    } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = page - show; i <= page + show; i++) {\n            str = str + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' '")]),s._v(" + i;\n        }\n    }\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" str.trim();\n}\n")])]),t("p",[s._v("思路是分段拼出页码，打印结果如下："),t("br"),t("img",{attrs:{src:"https://i.loli.net/2018/07/25/5b583e636d6b0.png",alt:"1"}})]),t("p",[s._v("不显示省略号的页码正常输出了，然后我们来看显示省略号的情况：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 第二种情况：显示省略号，当前页码前后最多显示2个页码")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("7")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n...\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("13")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("15")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("17")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n...\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("26")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("24")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("25")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("26")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("25")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("26")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("26")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n当前页码为 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("，那么显示 "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" ... "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("28")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v("\n")])]),t("p",[s._v("同样需要完成"),t("code",{pre:!0},[s._v("showPages()")]),s._v("函数：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("showPages")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("page, length, show")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" str = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v(";\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" preIndex = page - (show + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(");\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" aftIndex = page + (show + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(");\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (page < show + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(") {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i <= show * "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("; i++) {\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ((i !== preIndex && i !== aftIndex) || (i === "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" || i === total)) {\n                str = str + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' '")]),s._v(" + i;\n            } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n                str = str + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' ... '")]),s._v(" + total;\n                "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n            }\n        }\n    } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (page > total - (show + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(")) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = total; i >= total - (show * "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("); i--) {\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ((i !== preIndex && i !== aftIndex) || (i === "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" || i === total)) {\n                str = i + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' '")]),s._v(" + str;\n            } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n                str = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'1 ... '")]),s._v(" + str;\n                "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("break")]),s._v(";\n            }\n        }\n    } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = preIndex + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i <= aftIndex - "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i++) {\n            str = str + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' '")]),s._v(" + i;\n        }\n        str = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'1 ... '")]),s._v(" + str + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' ... '")]),s._v(" + total;\n    }\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" str.trim();\n}\n")])]),t("p",[s._v("同样也是采用分段拼的思路，能成功打印出结果："),t("br"),t("img",{attrs:{src:"https://i.loli.net/2018/07/25/5b58401ba2560.png",alt:"2"}})]),t("p",[s._v("但是仔细看看上面的代码会发现有大量重复冗余的逻辑了，能不能优化呢？下面是一种更为取巧的思路：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("showPages")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("page, total, show")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" str = page + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v(";\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i <= show; i++) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (page - i > "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n            str = page - i + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' '")]),s._v(" + str;\n        }\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (page + i < total) {\n            str = str + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' '")]),s._v(" + (page + i);\n        }\n    }\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (page - (show + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") > "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n        str = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'... '")]),s._v(" + str;\n    }\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (page > "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n        str = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' '")]),s._v(" + str;\n    }\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (page + show + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" < total) {\n        str = str + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' ...'")]),s._v(";\n    }\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (page < total) {\n        str = str + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("' '")]),s._v(" + total;\n    }\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" str;\n}\n")])]),t("p",[s._v("打印结果是一样的，但代码却大为精简了。")]),t("h1",[s._v("基本架构")]),t("p",[s._v("一个好的插件，代码一定是高复用、低耦合、易拓展的，因此我们需要采用面向对象的方法来搭建这个插件的基本架构：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 模仿jQuery $()")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("$")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("selector, context")]),s._v(") ")]),s._v("{\n    context = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("arguments")]),s._v(".length > "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" ? context : "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(";\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" context ? context.querySelectorAll(selector) : "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(";\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" Pagination = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("selector, pageOption")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 默认配置")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options = {\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageShow")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("ellipsis")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("hash")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v("\n    };\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 合并配置")]),s._v("\n    extend("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options, pageOption, "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(");\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 分页器元素")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageElement = $(selector)["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("];\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 数据总数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".dataCount = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.count;\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 当前页码")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.curr;\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 总页数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".ceil("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.count / "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.limit);\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 渲染")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".renderPages();\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 执行回调函数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.callback && "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.callback({\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber,\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limit")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.limit,\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("isFirst")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n    });\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 改变页数并触发事件")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".changePage();\n};\n\nPagination.prototype = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("constructor")]),s._v(": Pagination,\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("changePage")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{}\n};\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" Pagination;\n")])]),t("p",[s._v("如上，一个采用原型模式的分页器对象就搭建完成了，下面我们对上面的代码进行一一讲解。")]),t("h2",[s._v("分页配置")]),t("p",[s._v("本分页器提供如下基本参数：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 分页元素ID（必填）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" selector = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#pagelist'")]),s._v(";\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 分页配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" pageOption = {\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 每页显示数据条数（必填）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limit")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 数据总数（一般通过后端获取，必填）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("count")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("162")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 当前页码（选填，默认为1）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 是否显示省略号（选填，默认显示）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("ellipsis")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 当前页前后两边可显示的页码个数（选填，默认为2）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageShow")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 开启location.hash，并自定义hash值 （默认关闭）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 如果开启，在触发分页时，会自动对url追加：#!hash值={curr} 利用这个，可以在页面载入时就定位到指定页")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("hash")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 页面加载后默认执行一次，然后当分页被切换时再次触发")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("callback")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("obj")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// obj.curr：获取当前页码")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// obj.limit：获取每页显示数据条数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// obj.isFirst：是否首次加载页面，一般用于初始加载的判断")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 首次不执行")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (!obj.isFirst) {\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// do something")]),s._v("\n    }\n  }\n};\n")])]),t("p",[s._v("在构造函数里调用"),t("code",{pre:!0},[s._v("extend()")]),s._v("完成了用户参数与插件默认参数的合并。")]),t("h2",[s._v("回调事件")]),t("p",[s._v("通常情况下，在改变了插件状态后（点击事件等），插件需要作出一定的反应。因此我们需要对用户行为进行一定的监听，这种监听习惯上就叫作回调函数。"),t("br"),s._v(" 在上面代码中我们可以看到有这么一段：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 执行回调函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.callback && "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.callback({\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber,\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limit")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.limit,\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("isFirst")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n});\n")])]),t("p",[s._v("这种写法是不是有点奇怪呢，其实它相当于：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.callback){\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.callback({\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber,\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limit")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.limit,\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("isFirst")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n    });\n}\n")])]),t("p",[s._v("想必聪明的你已经明白了吧，这里的"),t("code",{pre:!0},[s._v("callback")]),s._v("并不是某个具体的东西，而是一个引用。不管callback指向谁，我们只需要判断它有没有存在，如果存在就执行它。")]),t("h1",[s._v("事件绑定")]),t("p",[s._v("接下来需要对分页器进行点击事件的绑定，也就是完成我们的"),t("code",{pre:!0},[s._v("changePage()")]),s._v("方法：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("changePage: "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" self = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(";\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" pageElement = self.pageElement;\n    EventUtil.addEvent(pageElement, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"click"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("ev")]),s._v(") ")]),s._v("{\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" e = ev || "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".event;\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" target = e.target || e.srcElement;\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.nodeName.toLocaleLowerCase() == "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"a"')]),s._v(") {\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.id === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"prev"')]),s._v(") {\n                self.prevPage();\n            } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.id === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"next"')]),s._v(") {\n                self.nextPage();\n            } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.id === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"first"')]),s._v(") {\n                self.firstPage();\n            } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.id === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"last"')]),s._v(") {\n                self.lastPage();\n            } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.id === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"page"')]),s._v(") {\n                self.goPage("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("parseInt")]),s._v("(target.innerHTML));\n            } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n                "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(";\n            }\n            self.renderPages();\n            self.options.callback && self.options.callback({\n                "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": self.pageNumber,\n                "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limit")]),s._v(": self.options.limit,\n                "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("isFirst")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v("\n            });\n            self.pageHash();\n        }\n    });\n}\n")])]),t("p",[s._v("整体的逻辑大家应该都能轻松看懂，无非就是判断当前点击的是什么，然后执行对应的逻辑操作，但具体的实现方式有的同学可能会有一点陌生。")]),t("p",[s._v("Q：这个"),t("code",{pre:!0},[s._v("target")]),s._v("是啥？这个"),t("code",{pre:!0},[s._v("srcElement")]),s._v("又是啥？"),t("br"),s._v(" A：这其实是JavaScript事件委托方面的知识，大家可以参考如下文章进行学习，这里不再赘述。")]),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/liugang-vip/p/5616484.html"}},[s._v("js中的事件委托或是事件代理详解")])]),t("p",[s._v("插件对象、配置完成了，事件也绑定了，那接下来就应该完成我们页码上显示的DOM节点的渲染了。")]),t("h1",[s._v("渲染DOM")]),t("p",[s._v("渲染的过程其实就是对上面我们封装的那几个字符串打印函数的改进，把字符串改为具体的DOM节点，然后添加进页面即可。"),t("br"),s._v(" 首先我们需要完成一个"),t("code",{pre:!0},[s._v("createHtml()")]),s._v("函数：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("createHtml: "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("elemDatas")]),s._v(") ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" self = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(";\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" fragment = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createDocumentFragment();\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" liEle = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createElement("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"li"')]),s._v(");\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" aEle = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createElement("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"a"')]),s._v(");\n  elemDatas.forEach("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("elementData, index")]),s._v(") ")]),s._v("{\n    liEle = liEle.cloneNode("),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(");\n    aEle = aEle.cloneNode("),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(");\n    liEle.setAttribute("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"class"')]),s._v(", CLASS_NAME.ITEM);\n    aEle.setAttribute("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"href"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"javascript:;"')]),s._v(");\n    aEle.setAttribute("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"id"')]),s._v(", elementData.id);\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (elementData.id !== "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'page'")]),s._v(") {\n      aEle.setAttribute("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"class"')]),s._v(", CLASS_NAME.LINK);\n    } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n      aEle.setAttribute("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"class"')]),s._v(", elementData.className);\n    }\n    aEle.innerHTML = elementData.content;\n    liEle.appendChild(aEle);\n    fragment.appendChild(liEle);\n  });\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" fragment;\n}\n")])]),t("p",[s._v("这个函数的作用很简单，就是生成一个节点：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item"')]),s._v(">")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("href")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"javascript:;"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"page"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-link current"')]),s._v(">")]),s._v("1"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n")])]),t("p",[s._v("代码中有涉及到两个性能优化的API，第一个API是"),t("code",{pre:!0},[s._v("document.createDocumentFragment()")]),s._v("，它的作用是创建一个临时占位符，然后存放那些需要插入的节点，可以有效避免页面进行DOM操作时的重绘和回流，减小页面的负担，提升页面性能。相关知识点，可参阅以下文章：")]),t("ul",[t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/leejersey/p/3516603.html"}},[s._v("JS性能优化之创建文档碎片")])]),t("li",[t("a",{attrs:{href:"https://blog.csdn.net/github_39457740/article/details/80698584"}},[s._v("前端性能优化第三篇-documentFragment")])])]),t("p",[s._v("第二个API是"),t("code",{pre:!0},[s._v("cloneNode()")]),s._v("，如果需要创建很多元素，就可以利用这个API来减少属性的设置次数，不过必须先提前准备一个样板节点，例如：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" frag = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createDocumentFragment();\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1000")]),s._v("; i++) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" el = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createElement("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'p'")]),s._v(");\n    el.innerHTML = i;\n    frag.appendChild(el);\n}\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".body.appendChild(frag);\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//替换为：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" frag = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createDocumentFragment();\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" pEl = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".getElementsByTagName("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'p'")]),s._v(")["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("];\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1000")]),s._v("; i++) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" el = pEl.cloneNode("),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(");\n    el.innerHTML = i;\n    frag.appendChild(el);\n}\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".body.appendChild(frag);\n")])]),t("p",[s._v("完成这个函数后，再进一步封装成两个插入节点的函数：（这一步可省略）")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("addFragmentBefore: "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("fragment, datas")]),s._v(") ")]),s._v("{\n  fragment.insertBefore("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".createHtml(datas), fragment.firstChild);\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("addFragmentAfter")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("fragment, datas")]),s._v(") ")]),s._v("{\n  fragment.appendChild("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".createHtml(datas));\n}\n")])]),t("p",[s._v("前者在最前插入节点，后者在最后插入节点。"),t("br"),s._v(" 一些常量和重复操作也可以进一步抽取：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("pageInfos: [{\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"first"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"首页"')]),s._v("\n  },\n  {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"prev"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"前一页"')]),s._v("\n  },\n  {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"next"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"后一页"')]),s._v("\n  },\n  {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"last"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"尾页"')]),s._v("\n  },\n  {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"..."')]),s._v("\n  }\n]\n\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getPageInfos")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("className, content")]),s._v(") ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"page"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("className")]),s._v(": className,\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": content\n  };\n}\n")])]),t("p",[s._v("利用上面封装好的对象和方法，我们就可以对最开始那两个字符串函数进行改造了：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("renderNoEllipsis: "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" fragment = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createDocumentFragment();\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber < "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.pageShow + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n    fragment.appendChild("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".renderDom("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.pageShow * "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("));\n  } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber > "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount - "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.pageShow) {\n    fragment.appendChild("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".renderDom("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount - "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.pageShow * "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount));\n  } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n    fragment.appendChild("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".renderDom("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber - "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.pageShow, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber + "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.pageShow));\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber > "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addFragmentBefore(fragment, [\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageInfos["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("],\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageInfos["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("]\n    ]);\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber < "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addFragmentAfter(fragment, ["),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageInfos["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("], "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageInfos["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("]]);\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" fragment;\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("renderEllipsis")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" fragment = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createDocumentFragment();\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addFragmentAfter(fragment, [\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".getPageInfos(CLASS_NAME.LINK + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('" current"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber)\n  ]);\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; i <= "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.pageShow; i++) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber - i > "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addFragmentBefore(fragment, [\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".getPageInfos(CLASS_NAME.LINK, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber - i)\n      ]);\n    }\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber + i < "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount) {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addFragmentAfter(fragment, [\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".getPageInfos(CLASS_NAME.LINK, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber + i)\n      ]);\n    }\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber - ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.pageShow + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") > "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addFragmentBefore(fragment, ["),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageInfos["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v("]]);\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber > "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(") {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addFragmentBefore(fragment, [\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageInfos["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("],\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageInfos["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("],\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".getPageInfos(CLASS_NAME.LINK, "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(")\n    ]);\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber + "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.pageShow + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" < "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addFragmentAfter(fragment, ["),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageInfos["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v("]]);\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber < "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addFragmentAfter(fragment, [\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".getPageInfos(CLASS_NAME.LINK, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount),\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageInfos["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("],\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageInfos["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("]\n    ]);\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" fragment;\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("renderDom")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("begin, end")]),s._v(") ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" fragment = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createDocumentFragment();\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" str = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(";\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" i = begin; i <= end; i++) {\n    str = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber === i ? CLASS_NAME.LINK + "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('" current"')]),s._v(" : CLASS_NAME.LINK;\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addFragmentAfter(fragment, ["),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".getPageInfos(str, i)]);\n  }\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" fragment;\n}\n")])]),t("p",[s._v("逻辑和最开始的"),t("code",{pre:!0},[s._v("showPages()")]),s._v("完全一样，只是变成了DOM的操作而已。")]),t("p",[s._v("至此，渲染部分的函数基本也封装完成，最后还剩一些操作页码的函数，比较简单，这里就不作讲解了，可自行参考"),t("a",{attrs:{href:"https://github.com/csdoker/csdwheels/blob/master/src/pagination/pagination.js"}},[s._v("源码")]),s._v("。")]),t("h1",[s._v("使用场景")]),t("p",[s._v("相信大家也看出来了，此分页器只负责分页本身的逻辑，具体的数据请求与渲染需要另外去完成。"),t("br"),s._v(" 不过，此分页器不仅能应用在一般的异步分页上，还可直接对一段已知数据进行分页展现，使用场景如下：")]),t("h2",[s._v("前端分页")]),t("p",[s._v("在callback里对总数据进行处理，然后取出当前页需要展示的数据即可")]),t("h2",[s._v("后端分页")]),t("p",[s._v("利用url上的页码参数，可以在页面载入时就定位到指定页码，并且可以同时请求后端指定页码下对应的数据 在callback回调函数里取得当前页码，可以使用"),t("code",{pre:!0},[s._v("window.location.href")]),s._v('改变url，并将当前页码作为url参数，然后进行页面跳转，例如"./test.html?page="')]),t("h1",[s._v("插件调用")]),t("p",[s._v("插件的调用也非常方便，首先，我们在页面引入相关的CSS、JS文件：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("rel")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"stylesheet"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("href")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination.min.css"')]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text/javascript"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("src")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination.min.js"')]),s._v(">")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),t("blockquote",[t("p",[s._v("样式如果觉得不满意可自行调整")])]),t("p",[s._v("然后将HTML结构插入文档中：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("ol")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagelist"')]),s._v(">")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("ol")]),s._v(">")]),s._v("\n")])]),t("p",[s._v("最后，将必填、选填的参数配置好即可完成本分页插件的初始化：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 分页元素ID（必填）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" selector = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#pagelist'")]),s._v(";\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 分页配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" pageOption = {\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 每页显示数据条数（必填）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limit")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 数据总数（一般通过后端获取，必填）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("count")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("162")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 当前页码（选填，默认为1）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 是否显示省略号（选填，默认显示）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("ellipsis")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 当前页前后两边可显示的页码个数（选填，默认为2）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageShow")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 开启location.hash，并自定义hash值 （默认关闭）")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 如果开启，在触发分页时，会自动对url追加：#!hash值={curr} 利用这个，可以在页面载入时就定位到指定页")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("hash")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 页面加载后默认执行一次，然后当分页被切换时再次触发")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("callback")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("obj")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// obj.curr：获取当前页码")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// obj.limit：获取每页显示数据条数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// obj.isFirst：是否首次加载页面，一般用于初始加载的判断")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 首次不执行")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (!obj.isFirst) {\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// do something")]),s._v("\n    }\n  }\n};\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 初始化分页器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Pagination(selector, pageOption);\n")])]),t("blockquote",[t("p",[s._v("在两种基础模式之上，还可以开启Hash模式")])]),t("p",[s._v("那么，整个分页器插件的封装到这里就全部讲解完毕了，怎么样，是不是觉得还挺简单？偷偷告诉你，接下来我们会逐渐尝试点更有难度的插件哦！敬请期待~~")]),t("blockquote",[t("p",[s._v("平心而论，整体的代码质量虽然一般，但是逻辑和结构我觉得还是写得算比较清晰的吧。代码的不足之处肯定还有很多，也希望各位看官多多指教！")])]),t("h1",[s._v("更新（2018-7-28）")]),t("h2",[s._v("ES6-环境配置")]),t("p",[s._v("2015年，ECMAScript正式发布了它的新版本——ECMAScript6，对JavaScript语言本身来说，这是一次彻彻底底的升级。")]),t("p",[s._v("经过这次更新，不仅修复了许多ES5时代留下来的“坑”，更是在原有的语法和规则上增加了不少功能强大的新特性，尽管目前浏览器对新规范支持得并不完善，但经过一些神奇的工具处理后就能让浏览器“认识”这些新东西，并兼容它们了。")]),t("p",[s._v("so，我们还有什么理由不用强大的ES6呢？接下来就让我们先来看看这些神奇的工具是怎么使用的吧。")]),t("h3",[s._v("Babel")]),t("p",[s._v("首先，我们需要一个工具来转换ES6的代码，它的芳名叫Babel。"),t("br"),s._v(" Babel是一个编译器，负责将源代码转换成指定语法的目标代码，并使它们很好的执行在运行环境中，所以我们可以利用它来编译我们的ES6代码。")]),t("p",[s._v("要使用Babel相关的功能，必须先用npm安装它们：（npm及node的使用方法请自行学习）")]),t("blockquote",[t("p",[s._v("npm i babel-cli babel-preset-env babel-core babel-loader babel-plugin-transform-runtime babel-polyfill babel-runtime -D")])]),t("p",[s._v("安装完成后，我们就可以手动使用命令编译某个目录下的js文件，并输出它们了。")]),t("p",[s._v("But，这就是完美方案了吗？显然不是。")]),t("p",[s._v("在实际的开发环境中，我们还需要考虑更多东西，比如模块化开发、自动编译和构建等等，所以我们还需要一个更为强大的工具来升级我们的这套构建流程。")]),t("h3",[s._v("Webpack")]),t("blockquote",[t("p",[s._v("围观群众：我知道了！你是想说Gulp对吧？！")])]),t("blockquote",[t("p",[s._v("喂，醒醒！大清亡了！")])]),t("p",[s._v("在前端框架以及工程化大行其道的今天，想必大家对Webpack、Gulp等工具并不会感到陌生，配合它们我们可以轻松实现一个大型前端应用的构建、打包、发布的流程。"),t("br"),s._v(" 不过现在是2018年了，三大框架三足鼎立，而Gulp已经稍显老态，作为它的晚辈，一个名叫Webpack的少年正在逐渐崛起。"),t("br"),s._v(" 这位少年，相信大家在使用Vue、React的过程中已经或多或少接触过它了。简而言之，它和Gulp在项目中的角色是一样的，只不过配置更为简单，构建更为高效，下面就让我们来看看Webpack是怎么使用的吧。")]),t("blockquote",[t("p",[s._v("如果你还没有接触过Webpack，那可以参考官方文档，先对Webpack有一个大致的认识，我们这里不作过多介绍，只讲解它的安装与配置。")])]),t("p",[s._v("As usual，我们需要安装它：")]),t("blockquote",[t("p",[s._v("npm i webpack webpack-cli webpack-dev-server -D")])]),t("p",[s._v("使用它也非常简单，只需要建立一个名叫"),t("code",{pre:!0},[s._v("webpack.config.js")]),s._v("的配置文件即可：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" path = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'path'")]),s._v(");\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(".exports = {\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 模式配置")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("mode")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'development'")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 入口文件")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("entry")]),s._v(": {},\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 出口文件")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("output")]),s._v(": {},\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 对应的插件")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("plugins")]),s._v(": [],\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 处理对应模块")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(": {}\n}\n")])]),t("p",[s._v("这个配置文件的主要部分有：入口、出口、插件、模块，在具体配置它们之前，我们可以先理一理我们项目的打包构建流程：")]),t("ol",[t("li",[s._v("寻找到"),t("code",{pre:!0},[s._v("./src/es6/")]),s._v("目录下面的"),t("code",{pre:!0},[s._v("index.js")]),s._v("项目入口文件")]),t("li",[s._v("使用Babel编译它及它所引用的所有依赖（如Scss、css文件等）")]),t("li",[s._v("压缩编译完成后的js文件，配置为umd规范，重命名为"),t("code",{pre:!0},[s._v("csdwheels.min.js")])]),t("li",[s._v("清空"),t("code",{pre:!0},[s._v("dist-es6")]),s._v("目录")]),t("li",[s._v("输出至"),t("code",{pre:!0},[s._v("dist-es6")]),s._v("目录下")])]),t("p",[s._v("要使用清空目录、压缩代码、解析css等功能，我们还需要安装一下额外的包：")]),t("blockquote",[t("p",[s._v("npm i clean-webpack-plugin uglifyjs-webpack-plugin css-loader style-loader node-sass sass-loader")])]),t("p",[s._v("要在配置中让babel失效，还需要建立一个"),t("code",{pre:!0},[s._v(".babelrc")]),s._v("文件，并在其中指定编码规则：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"presets"')]),s._v(": ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"env"')]),s._v("]\n}\n")])]),t("p",[s._v("最后，我们就能完成这个配置文件了：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" path = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'path'")]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" UglifyJsPlugin = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'uglifyjs-webpack-plugin'")]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" CleanWebpackPlugin = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'clean-webpack-plugin'")]),s._v("); "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//每次构建清理dist目录")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(".exports = {\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 模式配置")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("mode")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'development'")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 入口文件")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("entry")]),s._v(": {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pagination")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'./src/es6/index.js'")]),s._v("\n  },\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 出口文件")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("output")]),s._v(": {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("path")]),s._v(": path.resolve(__dirname, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'dist-es6'")]),s._v("),\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("filename")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"csdwheels.min.js"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("libraryTarget")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'umd'")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("library")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'csdwheels'")]),s._v("\n  },\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 对应的插件")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("plugins")]),s._v(": [\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" CleanWebpackPlugin(["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'dist-es6'")]),s._v("]),\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" UglifyJsPlugin({\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("test")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v("/\\.js($|\\?)/i")]),s._v("\n    })\n  ],\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 开发服务器配置")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("devServer")]),s._v(": {},\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 处理对应模块")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(": {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("rules")]),s._v(": [\n      {\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("test")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v("/\\.js$/")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("include")]),s._v(": path.join(__dirname , "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'src/es6'")]),s._v("),\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("exclude")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v("/node_modules/")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("use")]),s._v(": ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'babel-loader'")]),s._v("]\n      },\n      {\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("test")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v("/\\.scss$/")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("use")]),s._v(": [{\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("loader")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'style-loader'")]),s._v("\n        }, {\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("loader")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'css-loader'")]),s._v("\n        }, {\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("loader")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'sass-loader'")]),s._v("\n        }]\n      }\n    ]\n  }\n}\n")])]),t("p",[s._v("光配置好还不够，我们总需要用命令来运行它吧，在"),t("code",{pre:!0},[s._v("package.json")]),s._v("里配置：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"scripts"')]),s._v(": {\n  "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"test"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"node test/test.js"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"dev"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"webpack-dev-server"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"build"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"webpack && gulp mini && npm run test"')]),s._v("\n}\n")])]),t("p",[s._v("这里使用dev可以启动一个服务器来展示项目，不过这里我们暂时不需要，而运行"),t("code",{pre:!0},[s._v("npm run build")]),s._v("命令就可以同时将我们的"),t("code",{pre:!0},[s._v("./src/es5")]),s._v("和"),t("code",{pre:!0},[s._v("./src/es6")]),s._v("目录下的源码打包好输出到指定目录了。")]),t("blockquote",[t("p",[s._v("不是说好不用Gulp的呢？嘛。。针对ES5的打包工作来说Gulp还是挺好用的，真香警告！")])]),t("p",[s._v("ES6开发所需要的环境终于配置完成，接下来就让我们开始代码的重构吧！")]),t("h2",[s._v("ES6-代码重构")]),t("blockquote",[t("p",[s._v("如果你想要入门ES6，强烈推荐阮一峰老师的"),t("a",{attrs:{href:"http://es6.ruanyifeng.com"}},[s._v("教程")])])]),t("blockquote",[t("p",[s._v("相关的新语法和特性较多，不过要我们的项目要重构为ES6暂时还用不了多少比较高级的特性，你只需要着重看完"),t("code",{pre:!0},[s._v("Class")]),s._v("部分即可。")])]),t("p",[s._v("ES6引入的新特性中，最重要的一个就是"),t("code",{pre:!0},[s._v("Class")]),s._v("了。有了它，我们不需要再像以前那样用构造函数去模拟面向对象的写法，因为它是JavaScript原生支持的一种面向对象的语法糖，虽然底层仍然是原型链，不过至少写出来的代码看上去像是那么一回事了。")]),t("p",[s._v("拿前面提到的插件模板来说，ES5的时候我们是这样写的：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("root, factory")]),s._v(") ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" define === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'function'")]),s._v(" && define.amd) {\n    define([], factory);\n  } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(" === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'object'")]),s._v(" && "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(".exports) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("module")]),s._v(".exports = factory();\n  } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n    root.Plugin = factory();\n  }\n}("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" self !== "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'undefined'")]),s._v(" ? self : "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}}),s._v(") ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'use strict'")]),s._v(";\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// tool")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("extend")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("o, n, override")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" p "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("in")]),s._v(" n) {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (n.hasOwnProperty(p) && (!o.hasOwnProperty(p) || override))\n        o[p] = n[p];\n    }\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// plugin construct function")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Plugin")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("selector, userOptions")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Plugin() or new Plugin()")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (!("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("instanceof")]),s._v(" Plugin)) "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Plugin(selector, userOptions);\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".init(selector, userOptions)\n  }\n  Plugin.prototype = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("constructor")]),s._v(": Plugin,\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// default option")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("options")]),s._v(": {},\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("init")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("selector, userOptions")]),s._v(") ")]),s._v("{\n      extend("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options, userOptions, "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(");\n    }\n  };\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" Plugin;\n}));\n")])]),t("p",[s._v("经过"),t("code",{pre:!0},[s._v("Class")]),s._v("这种新语法糖的改造后，它变成了下面这样：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// ES6 插件模板")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Plugin")]),s._v(" ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("(selector, options = {}) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options = {};\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".assign("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options, options);\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".init(selector, options);\n  }\n\n  init(selector, options) {}\n}\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" Plugin;\n")])]),t("p",[s._v("改造后的代码，不仅在语法层面直接支持了构造函数的写法，更是去掉了IIFE这种臃肿的写法，可以说不管是看起来还是写起来都更为清晰流畅了。")]),t("blockquote",[t("p",[s._v("利用内置的"),t("code",{pre:!0},[s._v("Object.assign()")]),s._v("方法，可以直接替换掉我们实现的extend函数，功能可以说完全一样，而且更为强大")])]),t("p",[s._v("有了新的模板，我们就能直接开始插件代码的重构了，这里只贴上变动比较大的几个地方，其余部分可参考"),t("a",{attrs:{href:"https://github.com/csdoker/csdwheels/blob/master/src/es6/pagination/pagination.js"}},[s._v("源码")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'../../../style/pagination/pagination.scss'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Pagination")]),s._v(" ")]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("static")]),s._v(" CLASS_NAME = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("ITEM")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'pagination-item'")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("LINK")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'pagination-link'")]),s._v("\n  }\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("static")]),s._v(" PAGE_INFOS = [{\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"first"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"首页"')]),s._v("\n    },\n    {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"prev"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"前一页"')]),s._v("\n    },\n    {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"next"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"后一页"')]),s._v("\n    },\n    {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"last"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"尾页"')]),s._v("\n    },\n    {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"..."')]),s._v("\n    }\n  ]\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("constructor")]),s._v("(selector, options = {}) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 默认配置")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options = {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageShow")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("ellipsis")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("hash")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v("\n    };\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(".assign("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options, options);\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".init(selector);\n  }\n\n  changePage () {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" pageElement = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageElement;\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".addEvent(pageElement, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"click"')]),s._v(", (ev) => {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" e = ev || "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".event;\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" target = e.target || e.srcElement;\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.nodeName.toLocaleLowerCase() == "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"a"')]),s._v(") {\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.id === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"prev"')]),s._v(") {\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".prevPage();\n        } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.id === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"next"')]),s._v(") {\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".nextPage();\n        } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.id === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"first"')]),s._v(") {\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".firstPage();\n        } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.id === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"last"')]),s._v(") {\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".lastPage();\n        } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (target.id === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"page"')]),s._v(") {\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".goPage("),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("parseInt")]),s._v("(target.innerHTML));\n        } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(";\n        }\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".renderPages();\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.callback && "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.callback({\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber,\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limit")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.limit,\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("isFirst")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v("\n        });\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageHash();\n      }\n    });\n  }\n\n  init(selector) {\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 分页器元素")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageElement = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$(selector)["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("];\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 数据总数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".dataCount = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.count;\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 当前页码")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.curr;\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 总页数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".ceil("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.count / "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.limit);\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 渲染")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".renderPages();\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 执行回调函数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.callback && "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.callback({\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber,\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limit")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".options.limit,\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("isFirst")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n    });\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 改变页数并触发事件")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".changePage();\n  }\n}\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" Pagination;\n")])]),t("p",[s._v("总结起来，这次改造用到的语法就这么几点：")]),t("ol",[t("li",[s._v("const、let替换var")]),t("li",[s._v("用constructor实现构造函数")]),t("li",[s._v("箭头函数替换function")])]),t("p",[s._v("除此之外，在安装了Sass的编译插件后，我们还能直接在这个js文件中把样式import进来，这样打包压缩后的js中也会包含进我们的样式代码，使用的时候就不需要额外再引入样式文件了。"),t("br"),s._v(" 最后，由于ES6并不支持类的静态属性，所以还需要用到ES7新提案的"),t("code",{pre:!0},[s._v("static")]),s._v("语法。我们可以安装对应的babel包：")]),t("blockquote",[t("p",[s._v("npm i babel-preset-stage-0 -D")])]),t("p",[s._v("安装后，在.babelrc文件中添加它即可：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"presets"')]),s._v(": ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"env"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"stage-0"')]),s._v("]\n}\n")])]),t("p",[s._v("现在万事俱备，你只需要运行"),t("code",{pre:!0},[s._v("npm run build")]),s._v("，然后就可以看到我们打包完成后的"),t("code",{pre:!0},[s._v("csdwheels.min.js")]),s._v("文件了。")]),t("p",[s._v("打包后，我们还可以发布这个npm包，运行如下命令即可：（有关npm的发布流程，这里就不啰嗦了）")]),t("blockquote",[t("p",[s._v("npm login")])]),t("blockquote",[t("p",[s._v("npm publish")])]),t("p",[s._v("要使用发布后的插件，只需要安装这个npm包，并"),t("code",{pre:!0},[s._v("import")]),s._v("对应的插件：")]),t("blockquote",[t("p",[s._v("npm i csdwheels -D")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" { Pagination } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'csdwheels'")]),s._v(";\n")])]),t("h1",[s._v("更新（2018-08-01）")]),t("h2",[s._v("Vue插件版本")]),t("p",[s._v("按照原定开发计划，其实是不想马上更新Vue版本的，毕竟这个系列的“卖点”是原生开发，不过最近用Vue做的项目和自己的博客都恰好用到了分页这个组件，所以我决定一鼓作气把这个插件的Vue版本写出来，正好也利用这个机会学学Vue插件的开发。")]),t("h3",[s._v("开发规范")]),t("p",[s._v("既然是框架，那肯定有它自己的开发规范了，类似于我们自己写的插件一样，它也会给我们提供各式各样的API接口，让我们能定制自己的插件模块。"),t("br"),s._v(" 简单来说，我们的插件在Vue中需要挂载到全局上，这样才能直接在任何地方引入插件：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" Pagination "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'./components/vue-wheels-pagination'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" VueWheelsPagination = {\n  install (Vue, options) {\n    Vue.component(Pagination.name, Pagination)\n  }\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(" !== "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'undefined'")]),s._v(" && "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".Vue) {\n  "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("window")]),s._v(".Vue.use(VueWheelsPagination)\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" { VueWheelsPagination }\n")])]),t("p",[t("code",{pre:!0},[s._v("vue-wheels-pagination")]),s._v("是我们即将要开发的单文件组件，引入后通过"),t("code",{pre:!0},[s._v("install")]),s._v("方法把它挂载上去，然后在外部就可以"),t("code",{pre:!0},[s._v("use")]),s._v("这个插件了，最后导出这个挂载了我们插件的对象。（如果检测到浏览器环境后，可以直接挂载它）"),t("br"),s._v(" 这差不多就是一个最简单的插件模板了，更详细的配置可参考"),t("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/plugins.html"}},[s._v("官方文档")]),s._v("。")]),t("p",[s._v("将这个入口用"),t("code",{pre:!0},[s._v("Webpack")]),s._v("打包后，就可以在你Vue项目中的"),t("code",{pre:!0},[s._v("main.js")]),s._v("中全局加载这个插件了：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" { VueWheelsPagination } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'vue-wheels'")]),s._v("\nVue.use(VueWheelsPagination)\n")])]),t("p",[s._v("接下来，就让我们来看看用Vue的方式是怎么完成这个分页插件的吧！")]),t("h3",[s._v("DOM渲染")]),t("p",[s._v("利用现代"),t("code",{pre:!0},[s._v("MVVM")]),s._v("框架双向绑定的特性，我们已经不必再用原生JS的API去直接操作DOM了，取而代之的，可以在DOM结构上利用框架提供的API间接进行DOM的渲染及交互：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lang")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"html"')]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("nav")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination"')]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("href")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"javascript:;"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item first"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goFirst()"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber > 1"')]),s._v(">")]),s._v("{{info.firstInfo}}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("href")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"javascript:;"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item prev"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goPrev()"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber > 1"')]),s._v(">")]),s._v("{{info.prevInfo}}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("ul")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-list"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"ellipsis"')]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goFirst()"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber > 1"')]),s._v(">")]),s._v("1"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item ellipsis"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber - (max + 1) > 1"')]),s._v(">")]),s._v("..."),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goPage(pageNumber - pageIndex)"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber - pageIndex > 1"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-for")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageIndex in rPageData"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":key")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber - pageIndex"')]),s._v(">")]),s._v("\n        {{pageNumber - pageIndex}}\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item current"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goPage(pageNumber)"')]),s._v(">")]),s._v("{{pageNumber}}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goPage(pageNumber + pageIndex)"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber + pageIndex < pageCount"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-for")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageIndex in pageData"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":key")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber + pageIndex"')]),s._v(">")]),s._v("\n        {{pageNumber + pageIndex}}\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item ellipsis"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber + max + 1 < pageCount"')]),s._v(">")]),s._v("..."),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goLast()"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber < pageCount"')]),s._v(">")]),s._v("{{pageCount}}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("ul")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("ul")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-list"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"!ellipsis"')]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"pageIndex === pageNumber ? 'pagination-item current' : 'pagination-item'\"")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goPage(pageIndex)"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-for")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageIndex in pageDataFront"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber < max + 1"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":key")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageIndex"')]),s._v(">")]),s._v("\n        {{pageIndex}}\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"pageIndex === pageNumber ? 'pagination-item current' : 'pagination-item'\"")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goPage(pageIndex)"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-for")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageIndex in pageDataCenter"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber > pageCount - max"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":key")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageIndex"')]),s._v(">")]),s._v("\n        {{pageIndex}}\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("\"pageIndex === pageNumber ? 'pagination-item current' : 'pagination-item'\"")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goPage(pageIndex)"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-for")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageIndex in pageDataBehind"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"max + 1 <= pageNumber && pageNumber <= pageCount - max"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":key")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageIndex"')]),s._v(">")]),s._v("\n        {{pageIndex}}\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("li")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("ul")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("href")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"javascript:;"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item next"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goNext()"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber < pageCount"')]),s._v(">")]),s._v("{{info.nextInfo}}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("href")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"javascript:;"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pagination-item last"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"goLast()"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("v-if")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"pageNumber < pageCount"')]),s._v(">")]),s._v("{{info.lastInfo}}"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("nav")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n")])]),t("p",[s._v("如上，我们直接在单文件组件的"),t("code",{pre:!0},[s._v("template")]),s._v("标签中就完成了这个插件大部分的渲染逻辑。相对原生JS实现的版本，不仅轻松省去了事件监听、DOM操作等步骤，而且让我们能只关注插件本身具体的交互逻辑，可以说大大减轻了开发难度，并提升了页面性能。剩下的数据部分的逻辑及交互处理，在JS中完成即可。")]),t("h3",[s._v("交互逻辑")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'VueWheelsPagination'")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("props")]),s._v(": {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("count")]),s._v(": {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Number")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limit")]),s._v(": {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Number")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("curr")]),s._v(": {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Number")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("default")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("max")]),s._v(": {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Number")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("default")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("ellipsis")]),s._v(": {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Boolean")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("default")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("info")]),s._v(": {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Object")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("default")]),s._v(": {\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("firstInfo")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'首页'")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("prevInfo")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'前一页'")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("nextInfo")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'后一页'")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lastInfo")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'尾页'")]),s._v("\n      }\n    }\n  },\n  data () {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("pageNumber")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".curr\n    }\n  },\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("watch")]),s._v(": {\n    curr (newVal) {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber = newVal\n    }\n  },\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("computed")]),s._v(": {\n    pageData () {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" pageData = []\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" index = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; index <= "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".max; index++) {\n        pageData.push(index)\n      }\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" pageData\n    },\n    rPageData () {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageData.slice("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(").reverse()\n    },\n    pageDataFront () {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" pageDataFront = []\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" index = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; index <= "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".max * "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(" + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("; index++) {\n        pageDataFront.push(index)\n      }\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" pageDataFront\n    },\n    pageDataCenter () {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" pageDataCenter = []\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" index = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount - "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".max * "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("; index <= "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount; index++) {\n        pageDataCenter.push(index)\n      }\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" pageDataCenter\n    },\n    pageDataBehind () {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" pageDataBehind = []\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" index = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber - "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".max; index <= "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber + "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".max; index++) {\n        pageDataBehind.push(index)\n      }\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" pageDataBehind\n    },\n    pageCount () {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Math")]),s._v(".ceil("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".count / "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".limit)\n    }\n  },\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n    goFirst () {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'pageChange'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(")\n    },\n    goPrev () {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber--\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'pageChange'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber)\n    },\n    goPage (pageNumber) {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber = pageNumber\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'pageChange'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber)\n    },\n    goNext () {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber++\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'pageChange'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber)\n    },\n    goLast () {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageCount\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'pageChange'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".pageNumber)\n    }\n  }\n}\n")])]),t("p",[s._v("总体分成几个部分：")]),t("ol",[t("li",[s._v("props属性中对父组件传递的参数进行类型、默认值、是否必填等配置的定义")]),t("li",[s._v("计算属性中对分页器本身所需数据进行初始化")]),t("li",[s._v("定义操作页码的方法，并向父组件传递当前页码")]),t("li",[s._v("在watch属性中监听页码的变化（主要应用于不通过分页而在其他地方改变页码的情况）")])]),t("p",[s._v("这样，整个分页插件的开发就已经完成了。相信大家可以感觉得到，关于分页逻辑部分的代码量是明显减少了不少的，并且插件本身的逻辑也更清晰，和我们前面一步一步从底层实现起来的版本比较起来，更易拓展和维护了。")]),t("p",[s._v("在外层的组件上调用起来大概就像这样：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"app"')]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"main"')]),s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("vue-wheels-pagination")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@pageChange")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"change"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":count")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"count"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":limit")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"limit"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":info")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"info"')]),s._v(">")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("vue-wheels-pagination")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'app'")]),s._v(",\n  data () {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("count")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("162")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limit")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("5")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("info")]),s._v(": {\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("firstInfo")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'<<'")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("prevInfo")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'<'")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("nextInfo")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'>'")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lastInfo")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'>>'")]),s._v("\n      }\n    }\n  },\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n    change (pageNumber) {\n      "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(pageNumber)\n    }\n  }\n}\n")])]),t("p",[s._v("传入必填和选填的参数，再监听到子组件冒泡回来的页码值，最后在你自己定义的"),t("code",{pre:!0},[s._v("change()")]),s._v("方法里进行跳转等对应的逻辑处理就行了。")]),t("p",[s._v("项目的打包流程和上一节提到的差不多，只不过在配置上额外增加了一个本地开发环境服务器的启动，可以参考我的"),t("a",{attrs:{href:"https://github.com/csdoker/vue-wheels/blob/master/webpack.config.js"}},[s._v("源码")]),s._v("。打包完成后，同样可以发布一个npm包，然后就可以在任何Vue项目中引入并使用了。")]),t("blockquote",[t("p",[s._v("后面开发的轮子不一定都会发布Vue版本，因为已经给大家提供了一种重构和包装插件的思路，如果你有自己的需求，可自行利用框架的规范进行插件开发。")])]),t("p",[s._v("到止为止，我们第一个轮子的开发就算真正结束了，所有源码已同步更新到"),t("code",{pre:!0},[s._v("github")]),s._v("，如果大家发现有bug或其他问题，可以回复在项目的"),t("code",{pre:!0},[s._v("issue")]),s._v("中，咱们后会有期！（挖坑不填，逃。。")]),t("p",[s._v("To be continued...")]),t("h1",[s._v("参考内容")]),t("ul",[t("li",[t("a",{attrs:{href:"https://blog.iihaiku.com/2016/11/23/basic-review-from-anonymous-function-to-iife"}},[s._v("由匿名函数展开的一系列知识点")])]),t("li",[t("a",{attrs:{href:"https://ltaoo.github.io/2016/08/07/immediately-invoked-function-expression"}},[s._v("自执行函数(IIFE)")])]),t("li",[t("a",{attrs:{href:"https://github.com/umdjs/umd"}},[s._v("UMD (Universal Module Definition)")])]),t("li",[t("a",{attrs:{href:"http://geocld.github.io/2016/03/10/javascript_plugin"}},[s._v("原生JavaScript插件编写指南")])]),t("li",[t("a",{attrs:{href:"https://www.jianshu.com/p/e65c246beac1"}},[s._v("如何定义一个高逼格的原生JS插件")])]),t("li",[t("a",{attrs:{href:"http://f2e.souche.com/blog/ru-he-xie-ge-jian-dan-de-fen-ye"}},[s._v("如何写一个简单的分页")])]),t("li",[t("a",{attrs:{href:"http://www.cnblogs.com/liyunhua/p/4529086.html"}},[s._v("我总结的js性能优化的小知识")])]),t("li",[t("a",{attrs:{href:"https://www.webpackjs.com/guides/getting-started"}},[s._v("起步 | webpack 中文网")])]),t("li",[t("a",{attrs:{href:"https://segmentfault.com/a/1190000013512471"}},[s._v("webpack 项目构建：（一）基本架构搭建")])]),t("li",[t("a",{attrs:{href:"https://segmentfault.com/a/1190000013542132"}},[s._v("webpack 项目构建：（二）ES6 编译环境搭建")])]),t("li",[t("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/plugins.html"}},[s._v("Vue-Guide-插件")])]),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/shapeY/p/7875930.html"}},[s._v("第一个Vue插件从封装到发布")])]),t("li",[t("a",{attrs:{href:"https://blog.csdn.net/applechu_lu/article/details/79329446"}},[s._v("vue封装插件并发布到npm上")])]),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/yesyes/p/7588833.html"}},[s._v("vue封装第三方插件并发布到npm")])])])])}],n=t("2877"),p={},l=Object(n["a"])(p,r,e,!1,null,null,null);a["default"]=l.exports}}]);